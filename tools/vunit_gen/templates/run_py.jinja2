#!/usr/bin/env python3

# Generated run.py from buck2


from pathlib import Path
from vunit import VUnit

vu = VUnit.from_argv(compile_builtins=False) # output_path="{{vunit_out}}"

# For now, add everything here so it's always available
vu.add_vhdl_builtins()
vu.add_com()
vu.add_json4vhdl()
vu.add_osvvm()
vu.add_random()
vu.add_verification_components()

# Create default library 'lib'

# Create libraries
{% for library in libraries %}
{{library.name}} = vu.add_library("{{library.name}}")
{% for file in library.files %}
{{library.name}}.add_source_file("{{file}}")
{% endfor %}
{% endfor %}


# Run vunit function
vu.main()